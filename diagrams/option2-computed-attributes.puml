@startuml
skinparam defaultTextAlignment center
skinparam componentStyle rectangle

title Option 2: Computed Attributes Pattern\nReal-Time Streaming with Minimal Profiles

package "Google Cloud Platform" #4285F4 {
  [BigQuery\nData Warehouse\n\nRaw data stays here\n2-10 TB] as BQ #FBBC04
  [Lead Scoring\nModels] as MODELS
  [Computed Attributes\n\n5-10 fields\n500 MB] as COMP
  [Streaming Service\nCloud Function] as STREAM #0F9D58
}

package "Adobe Experience Platform" #FF0000 {
  [Streaming\nIngestion API] as API
  [Real-Time\nCustomer Profile\n\n10M profiles] as PROFILE
  [Segmentation\nEngine] as SEG
}

package "Destinations" #34A853 {
  [Marketo\nReal-Time] as MKT
  [Google Ads\nReal-Time] as GAD
  [Sales CRM\nAlerts] as CRM
}

BQ --> MODELS : Daily scoring
MODELS --> COMP
COMP --> STREAM
STREAM --> API : HTTPS streaming
API --> PROFILE
PROFILE --> SEG
SEG --> MKT
SEG --> GAD
SEG --> CRM

note bottom
**BENEFITS:**
• 85-95% data reduction
• Real-time (2-10 min)
• Full AEP features

**TRADE-OFFS:**
• Vendor lock-in
• Higher cost $248K-$858K/year
• Dual-system complexity
end note

@enduml
